const request = require('request-promise')
const cheerio = require('cheerio')
const get = async () => {
    let $ = await request({
        uri: 'https://www.solotodo.cl/products/26038-aoc-e1670swu',
        transform: body => cheerio.load(body)
    })
    // $ = cheerio.load('<table class="table table-sm mb-0"><thead><tr><th scope="col">Tienda</th><th scope="col">Rating</th><th scope="col" class="text-right"><div class="__react_component_tooltip place-top type-dark" id="offer-price" data-id="tooltip"><span>Con el medio de pago preferido de la tienda</span></div><span data-tip="true" data-for="offer-price" class="tooltip-span" currentitem="false">P. oferta</span></th><th scope="col" class="text-right"><div class="__react_component_tooltip place-top type-dark" id="normal-price" data-id="tooltip"><span>Con cualquier medio de pago</span></div><span data-tip="true" data-for="normal-price" class="tooltip-span" currentitem="false">P. normal</span></th></tr></thead><tbody><tr><td><a href="https://www.spdigital.cl/products/view/52172" target="_blank" class="normal-table-product-link" rel="noopener nofollow">SpDigital</a></td><td><div class="rating-stars"><div class="dv-star-rating dv-star-rating-non-editable" style="display: inline-block; position: relative;"><input class="dv-star-rating-input" type="radio" name="rating" id="rating_5" value="5" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-empty-star" for="rating_5" style="float: right; cursor: default; color: rgb(51, 51, 51); --darkreader-inline-color:#c8c3bc;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/86/ratings"><span><span style="position: absolute;"><i class="far fa-star"></i></span><span><i class="fas fa-star-half"></i></span></span></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_4" value="4" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_4" style="float: right; cursor: default; color: rgb(255,180,0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/86/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_3" value="3" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_3" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/86/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_2" value="2" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_2" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/86/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_1" value="1" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_1" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/86/ratings"><i class="fas fa-star"></i></a></label></div></div></td><td class="text-right"><a href="https://www.spdigital.cl/products/view/52172" target="_blank" class="price-container" rel="noopener nofollow">$ 59.990</a></td><td class="text-right"><a href="https://www.spdigital.cl/products/view/52172" target="_blank" class="price-container" rel="noopener nofollow">$ 62.090</a></td></tr><tr><td><a href="https://www.winpy.cl/venta/monitor-super-delgado-aoc-de-15-6-tn-hd-vga-alimentacion-usb/" target="_blank" class="normal-table-product-link" rel="noopener nofollow">Winpy</a><span><a href="/products/26038" class="ml-2 text-warning"><i class="fas fa-exclamation-triangle"></i></a></span></td><td><div class="rating-stars"><div class="dv-star-rating dv-star-rating-non-editable" style="display: inline-block; position: relative;"><input class="dv-star-rating-input" type="radio" name="rating" id="rating_5" value="5" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-empty-star" for="rating_5" style="float: right; cursor: default; color: rgb(51, 51, 51); --darkreader-inline-color:#c8c3bc;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/45/ratings"><span><span style="position: absolute;"><i class="far fa-star"></i></span><span><i class="fas fa-star-half"></i></span></span></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_4" value="4" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_4" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/45/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_3" value="3" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_3" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/45/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_2" value="2" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_2" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/45/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_1" value="1" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_1" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/45/ratings"><i class="fas fa-star"></i></a></label></div></div></td><td class="text-right"><a href="https://www.winpy.cl/venta/monitor-super-delgado-aoc-de-15-6-tn-hd-vga-alimentacion-usb/" target="_blank" class="price-container" rel="noopener nofollow">$ 65.664</a></td><td class="text-right"><a href="https://www.winpy.cl/venta/monitor-super-delgado-aoc-de-15-6-tn-hd-vga-alimentacion-usb/" target="_blank" class="price-container" rel="noopener nofollow">$ 69.120</a></td></tr><tr><td><a href="https://www.mercadotech.cl/products/monitor-aoc-15-6-negro-tft-usb-vga?taxon_id=37" target="_blank" class="normal-table-product-link" rel="noopener nofollow">Mercado Tech</a></td><td><div class="rating-stars"><div class="dv-star-rating dv-star-rating-non-editable" style="display: inline-block; position: relative;"><input class="dv-star-rating-input" type="radio" name="rating" id="rating_5" value="5" checked="" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_5" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/262/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_4" value="4" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_4" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/262/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_3" value="3" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_3" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/262/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_2" value="2" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_2" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/262/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_1" value="1" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_1" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/262/ratings"><i class="fas fa-star"></i></a></label></div></div></td><td class="text-right"><a href="https://www.mercadotech.cl/products/monitor-aoc-15-6-negro-tft-usb-vga?taxon_id=37" target="_blank" class="price-container" rel="noopener nofollow">$ 66.990</a></td><td class="text-right"><a href="https://www.mercadotech.cl/products/monitor-aoc-15-6-negro-tft-usb-vga?taxon_id=37" target="_blank" class="price-container" rel="noopener nofollow">$ 66.990</a></td></tr><tr><td><a href="https://www.bip.cl/monitor-led-156-1366x768-vga-usb-pne1670swu_20501" target="_blank" class="normal-table-product-link" rel="noopener nofollow">Bip</a></td><td><div class="rating-stars"><div class="dv-star-rating dv-star-rating-non-editable" style="display: inline-block; position: relative;"><input class="dv-star-rating-input" type="radio" name="rating" id="rating_5" value="5" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-empty-star" for="rating_5" style="float: right; cursor: default; color: rgb(51, 51, 51); --darkreader-inline-color:#c8c3bc;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/4/ratings"><i class="far fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_4" value="4" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-empty-star" for="rating_4" style="float: right; cursor: default; color: rgb(51, 51, 51); --darkreader-inline-color:#c8c3bc;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/4/ratings"><i class="far fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_3" value="3" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-empty-star" for="rating_3" style="float: right; cursor: default; color: rgb(51, 51, 51); --darkreader-inline-color:#c8c3bc;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/4/ratings"><span><span style="position: absolute;"><i class="far fa-star"></i></span><span><i class="fas fa-star-half"></i></span></span></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_2" value="2" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_2" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/4/ratings"><i class="fas fa-star"></i></a></label><input class="dv-star-rating-input" type="radio" name="rating" id="rating_1" value="1" style="display: none; position: absolute; margin-left: -9999px;"><label class="dv-star-rating-star dv-star-rating-full-star" for="rating_1" style="float: right; cursor: default; color: rgb(255, 180, 0); --darkreader-inline-color:#ffbc1a;" data-darkreader-inline-color=""><a class="rating-star" href="/stores/4/ratings"><i class="fas fa-star"></i></a></label></div></div></td><td class="text-right"><a href="https://www.bip.cl/monitor-led-156-1366x768-vga-usb-pne1670swu_20501" target="_blank" class="price-container" rel="noopener nofollow">$ 72.990</a></td><td class="text-right"><a href="https://www.bip.cl/monitor-led-156-1366x768-vga-usb-pne1670swu_20501" target="_blank" class="price-container" rel="noopener nofollow">$ 85.544</a></td></tr></tbody></table>')
    console.log($('#product-prices-table').html())
    $('tbody').each(function (index, el) {
        console.log($(this).text())
        const newProduct = {
            NAME: $(this).children('h3').children('a').text(),
            URL: $(this).children('h3').children('a').attr('href')
        }
        console.log(newProduct)
    })
}
get()
